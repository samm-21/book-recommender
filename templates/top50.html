<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Book Recommender System</title>
    <!-- Latest compiled and minified CSS -->
    {#
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">#}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/style.css">

    <style>
        body::before {
            background-image: url('/static/Book-Recommendations_full_990.jpg');
        }
    </style>
</head>

<body>
    <div class="background">.</div>

    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/"
                style="color: crimson; font-family: 'Comic Sans MS'; font-size: xx-large">TheBookNerd</a>
            <div class=" navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav" style="margin: 1rem">
                    <b><a class="nav-link" href="/">Home</a></b>
                    <b><a class="nav-link" href="/top50">Top 50</a></b>
                    <b><a class="nav-link" href="/recommend">Recommend</a></b>
                    <b><a class="nav-link" href="/searchbygenre">Search by Genre</a></b>
                    <b><a class="nav-link" href="/urbooks">Underrated Books</a></b>
                </div>
                <div class="navbar-nav">
                    <form action="/surprise" method="post">
                        <button formmethod="post" type="submit" class="btn btn-success"
                            style="font-family: 'Comic Sans MS'; font-size: large; margin-right: 5px;">Surprise
                            Me!</button>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    {# <nav class="navbar ">#}
        {# <a class="navbar-brand">My Book recommender</a>#}
        {# <ul class="nav navbar-nav">#}
            {# <li><a href="/">Home</a></li>#}
            {# <li><a href="/recommend">Recommend</a></li>#}
            {# <li><a>Contact</a></li>#}
            {# </ul>#}
        {# </nav>#}

    <div class="container">
        <!-- <div class="row"> -->
            <div class="col-md-6">
                <b>
                    <h1 style="margin: 1rem; color: white;">Top 50 Books</h1>
                </b>
            </div>

            <div class="card-container">
                {% for i in range(book_name|length) %}
                <div class="col-md-3">
                    <a href="{{ url_for('book_detail', isbn=books[i]['ISBN']) }}">
                        <div id="card" class="card">
                            <div class="card-body">
                                <img class="card-img-top" src="{{ image[i] }}">
                                <b style="font-size: large; margin: 0px 0.25px">
                                    <li>{{ books[i]['Book-Title'] }}</li>
                                </b>
                                <li style="color: darkslategray">{{ books[i]['Book-Author'] }}</li>
                                <li style="color: darkslategray">Votes - {{ votes[i] }}</li>
                                <li style="color: darkslategray">Rating - {{ rating[i] | round }}</li>
                                <p>ISBN: {{ books[i]['ISBN'] }}</p>
                            </div>
                        </div>
                    </a>
                </div>
                {% endfor %}
            </div>
            
            

        <!-- </div> -->
    </div>

</body>

</html>



<!-- @app.route('/book/<string:isbn>', methods=['GET'])
def book_detail(isbn): -->
<!-- print(f"Requested ISBN: {isbn}")  # Debugging line
    book = next((b for b in books if b['ISBN'] == isbn), None)

    if book:
        print(f"Found Book: {book}")  # Debugging line
        book_description = get_wikipedia_summary(book['Book-Title'])
        author_info = get_author_info(book['Book-Author'])
        other_books = get_other_books_by_author(book['Book-Author'])

        popular_df = [b for b in books if b['Book-Author'] == book['Book-Author']]
        book_name = list(b['Book-Title'] for b in popular_df)
        author = list(b['Book-Author'] for b in popular_df)
        image = list(b['Image-URL-M'] for b in popular_df)
        votes = list(b.get('num-ratings', 0) for b in popular_df) 
        rating = list(b.get('avg_rating', 0) for b in popular_df)

        return render_template('book_detail.html', book=book, book_description=book_description,
                                author_info=author_info, other_books=other_books, book_name=book_name,
                                author_list=author, image=image, votes=votes, rating=rating)
     -->
<!-- else:
        print(f"Book not found for ISBN: {isbn}")
        return "Book not found", 404 -->